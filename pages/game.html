<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../styles/game.css" />
  </head>
  <body>
    <section id="login" class="row">
      <div id="player1-login" class="col">
        <div id="loginForm-player1" class="card container h-50 p-5 active">
          <div id="heading">Player 1Login</div>
          <form class="login-form">
            <div class="mb-3">
              <label for="InputUsername" class="form-label">Username</label>
              <input type="text" class="form-control" name="username" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" />
            </div>
            <input type="text" value="PlayerOne" name="player" hidden />
            <div class="submit-row">
              <button type="submit" class="btn btn-primary">Submit</button>
              <div class="signup">
                <p>
                  Don't Have an Account?
                  <a class="toogleScreen" id="playerOneSignButton"> Sign Up </a>
                </p>
              </div>
            </div>
          </form>
        </div>

        <div
          id="signupForm-player1"
          class="card container p-5"
          style="display: none"
        >
          <div class="heading">Sign Up</div>
          <form id="sign-up-form" class="signup-form">
            <div class="mb-3">
              <label for="InputUsername" class="form-label">Email</label>
              <input type="email" class="form-control" name="email" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">
                Confirm Password</label
              >
              <input
                type="password"
                class="form-control"
                name="confirmPassword"
              />
            </div>
            <input type="text" value="PlayerOne" name="player" hidden />
            <div class="submit-row">
              <button type="submit" class="btn btn-primary">Submit</button>
              <div class="signup">
                <p>
                  Already have an account?
                  <a class="toogleScreen" id="playerOneLoginButton">Log In</a>
                </p>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div id="player2-login" class="col">
        <div id="loginForm-player2" class="card container h-50 p-5 active">
          <div id="heading">Player 2Login</div>
          <form class="login-form">
            <div class="mb-3">
              <label for="InputUsername" class="form-label">Username</label>
              <input type="text" class="form-control" name="username" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" />
            </div>
            <input value="PlayerTwo" name="player" hidden />
            <div class="submit-row">
              <button type="submit" class="btn btn-primary">Submit</button>
              <div class="signup">
                <p>
                  Don't Have an Account?
                  <a class="toogleScreen" id="playerTwoSignButton"> Sign Up </a>
                </p>
              </div>
            </div>
          </form>
        </div>

        <div
          id="signupForm-player2"
          class="card container p-5"
          style="display: none"
        >
          <div class="heading">Sign Up</div>
          <form id="sign-up-form-player2" class="signup-form">
            <div class="mb-3">
              <label for="InputUsername" class="form-label">Username</label>
              <input type="text" class="form-control" name="username" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" />
            </div>
            <div class="mb-3">
              <label for="InputPassword" class="form-label">
                Confirm Password</label
              >
              <input
                type="password"
                class="form-control"
                name="confirmPassword"
              />
            </div>
            <input type="text" value="PlayerOne" name="player" hidden />
            <div class="submit-row">
              <button type="submit" class="btn btn-primary">Submit</button>
              <div class="signup">
                <p>
                  Already have an account?
                  <a class="toogleScreen" id="playerTwoLoginButton">Log In</a>
                </p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section id="category-section">
      <div
        class="d-flex flex-column justify-content-center align-items-center gap-5"
        id="category-container"
      >
        <h1>Select Category</h1>
        <div class="d-flex gap-3">
          <button class="btn btn-secondary category-btn" value="animals">
            Animals
          </button>
          <button class="btn btn-secondary category-btn" value="fruits">
            Fruits
          </button>
          <button class="btn btn-secondary category-btn" value="flowers">
            Flowers
          </button>
        </div>
      </div>
    </section>

    <section id="game-section">
      <div class="container" id="game-container">
        <div class="card d-flex flex-column" id="live-score-card">
          <h3>Score Card</h3>
          <div
            class="player d-flex flex-row text-center player-active"
            id="player1"
          >
            <div class="player-icon">
              <img src="../assets/user-icon-1.png" alt="" />
            </div>
            <div class="player-name-score d-flex flex-column">
              <div class="player-name player-styles">
                <p id="player1-name">Jisna</p>
              </div>
              <div class="player-score player-styles">
                <p id="player1-score">0</p>
              </div>
            </div>
          </div>
          <div class="player d-flex flex-row text-center" id="player2">
            <div class="player-icon">
              <img src="../assets/user-icon-2.png" alt="" />
            </div>
            <div class="player-name-score d-flex flex-column">
              <div class="player-name player-styles">
                <p id="player2-name">Gopika</p>
              </div>
              <div class="player-score player-styles">
                <p id="player2-score">0</p>
              </div>
            </div>
          </div>
        </div>
        <div class="container" id="cards-container"></div>
        <div></div>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script type="module" src="../dist/game.js"></script>
  </body>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    console.log("script working");
    const firebaseConfig = {
      apiKey: "AIzaSyAg-hNrn7Sk3CupBr95yk-l69wII0kpKYk",
      authDomain: "flip-it-game-c1f44.firebaseapp.com",
      databaseURL: "https://flip-it-game-c1f44-default-rtdb.firebaseio.com",
      projectId: "flip-it-game-c1f44",
      storageBucket: "flip-it-game-c1f44.appspot.com",
      messagingSenderId: "154910747796",
      appId: "1:154910747796:web:1f077fbcdaa9c1d2755881",
      measurementId: "G-GD5NQTJ3Y8",
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    const form = document.getElementById("sign-up-form");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const email = formData.get("email");
      const password = formData.get("password");
      const win = "noOfWins";
      console.log(email, password, win);

      try {
        const userCredential = await firebase
          .auth()
          .signInAnonymously()
          .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;

            console.log(errorCode, errorMessage);
          });

        const uid = userCredential.user.uid;

        // Store the username and password in the database
        await database.ref("users/").push({
          email: email,
          password: password,
          win: win,
        });
      } catch (error) {
        console.error("Error signing in anonymously: ", error);
      }
    });
  </script>
</html>
